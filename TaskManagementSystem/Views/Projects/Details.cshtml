@model TaskManagementSystem.Models.Project

@{
    ViewBag.Title = "Details";
}

<h2>Details</h2>

<div>
    <h4>Project</h4>
    <hr />
    <dl class="dl-horizontal">
        <dt>
            @Html.DisplayNameFor(model => model.TeamLead)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.TeamLead.UserName)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.ProjectName)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.ProjectName)
        </dd>
        <dt> @Html.DisplayNameFor(model => model.Tasks)</dt>
 
    @if ((ViewBag.Tasks as List<TaskManagementSystem.Models.Task>).Count != 0)
    {
        <dd>
            <table>
                <thead>
                    <th>
                        @Html.DisplayNameFor(model => model.Tasks.FirstOrDefault().Title)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.Tasks.FirstOrDefault().TaskStatus.Status)
       
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.Tasks.FirstOrDefault().TaskPriority.Priority)
                    </th>
                </thead>

                <tbody>
                    @foreach (var task in ViewBag.Tasks as IEnumerable<TaskManagementSystem.Models.Task>)
                    {
                        <tr>
                            <td> @Html.ActionLink(task.Title, "Details", "Tasks", new { id = task.ID },null)  </td>
                            <td> @task.TaskStatus.Status </td>
                            <td> @task.TaskPriority.Priority </td>
                        </tr>
                    };
                </tbody>
            </table>
          </dd>
            }
            else
            {
<dd> На этом проекте нет заданий</dd>
    }
    </dl>
</div>
<p>
    @Html.ActionLink("Изменить", "Edit", new { id = Model.ID }, new { @class = "btn btn-primary btn-sm glyphicon glyphicon-edit" }) |
    @Html.ActionLink("Назад к списку", "Index")
</p>
